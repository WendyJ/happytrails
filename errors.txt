Problem:

    | Resolving plugin JAR dependencies
    | Error WARNING: Dependencies cannot be resolved for plugin [mail] due to error: startup failed:
    Could not instantiate global transform class org.spockframework.compiler.SpockTransform specified at jar:file:/Users/mraible/.grails/ivy-cache/org.spockframework/spock-core/jars/spock-core-0.7-groovy-1.8.jar!/META-INF/services/org.codehaus.groovy.transform.ASTTransformation  because of exception org.spockframework.util.IncompatibleGroovyVersionException: The Spock compiler plugin cannot execute because Spock 0.7.0-groovy-1.8 is not compatible with Groovy 2.0.7. For more information, see http://versioninfo.spockframework.org

Solution: Was caused by duplicate dependencies in BuildConfig.groovy with different groupIds.

    :: problems summary ::
    :::: ERRORS
        Server access Error: Connection refused url=http://localhost:8081/artifactory/plugins-releases-local/org/codehaus/geb/geb-spock/0.9.0-RC-1/geb-spock-0.9.0-RC-1.pom
        Server access Error: Connection refused url=http://localhost:8081/artifactory/plugins-releases-local/org/codehaus/geb/geb-spock/0.9.0-RC-1/geb-spock-0.9.0-RC-1.jar

Solution:
    repositories {
        inherits false // Whether to inherit repository definitions from plugins
    }

Problem:

    | Running 29 unit tests... 28 of 29
    | Failure:  testSendingBlankDirectionsAreOK(happytrails.RouteControllerTests)
    |  java.lang.reflect.InvocationTargetException
        at happytrails.RouteControllerTests.testSendingBlankDirectionsAreOK(RouteControllerTests.groovy:163)
    Caused by: org.codehaus.groovy.runtime.metaclass.MissingMethodExceptionNoStack: No signature of method: happytrails.Route.addToDirections() is applicable for argument types: (happytrails.Direction) values: [null]
    Possible solutions: getDirections()
    | Completed 29 unit tests, 1 failed in 6468ms

Solution:
    Caused by Direction not being in @Mock. After added, validation kicks in for Direction and this test seems to be invalid. Added @Ignore for Test.

Problem:

    | Running 11 spock tests... 5 of 11
    | Failure:  click signup link(happytrails.AuthenticatedUserSpec)
    |  org.openqa.selenium.ElementNotVisibleException: Element must be displayed to click (WARNING: The server did not provide any stacktrace information)
    Command duration or timeout: 13 milliseconds
    Build info: version: '2.27.0', revision: '18259', time: '2012-12-05 11:30:53'
    System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.8.2', java.version: '1.7.0_04'
    Session ID: e6f6e42e91010626634864d3ccbdc950
    Driver info: org.openqa.selenium.chrome.ChromeDriver
    Capabilities [{platform=MAC, chrome.chromedriverVersion=23.0.1240.0, acceptSslCerts=false, javascriptEnabled=true, browserName=chrome, rotatable=false, locationContextEnabled=false, version=25.0.1364.172, cssSelectorsEnabled=true, databaseEnabled=false, handlesAlerts=true, browserConnectionEnabled=false, nativeEvents=true, webStorageEnabled=true, chrome.nativeEvents=false, applicationCacheEnabled=false, takesScreenshot=true}]
        at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187)
        at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
        at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:533)
        at org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:246)
        at org.openqa.selenium.remote.RemoteWebElement.click(RemoteWebElement.java:79)
        at geb.navigator.NonEmptyNavigator.click(NonEmptyNavigator.groovy:342)
        at geb.content.TemplateDerivedPageContent.click(TemplateDerivedPageContent.groovy:108)
        at happytrails.AuthenticatedUserSpec.click signup link(AuthenticatedUserSpec.groovy:17)
    | Completed 5 spock tests, 1 failed in 7687ms
    | Tests FAILED  - view reports in /Users/mraible/dev/happytrails-grails2/target/test-reports

Solution:

    Removed <div class="nav-collapse">

Problem:

    | Running 11 spock tests... 7 of 11
    | Failure:  add new route to region(happytrails.AuthenticatedUserSpec)
    |  org.openqa.selenium.InvalidElementStateException: Element must be user-editable in order to clear it. (WARNING: The server did not provide any stacktrace information)
    Command duration or timeout: 21 milliseconds
    Build info: version: '2.27.0', revision: '18259', time: '2012-12-05 11:30:53'
    System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.8.2', java.version: '1.7.0_04'
    Session ID: 026b99b1fc57111c89b98e183c2ff775
    Driver info: org.openqa.selenium.chrome.ChromeDriver
    Capabilities [{platform=MAC, chrome.chromedriverVersion=26.0.1383.0, acceptSslCerts=false, javascriptEnabled=true, browserName=chrome, rotatable=false, locationContextEnabled=false, version=25.0.1364.172, cssSelectorsEnabled=true, databaseEnabled=false, handlesAlerts=true, browserConnectionEnabled=false, nativeEvents=true, webStorageEnabled=true, applicationCacheEnabled=false, takesScreenshot=true}]
        at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187)
        at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
        at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:533)
        at org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:246)
        at org.openqa.selenium.remote.RemoteWebElement.clear(RemoteWebElement.java:113)
        at geb.navigator.NonEmptyNavigator.setInputValue(NonEmptyNavigator.groovy:562)
        at geb.navigator.NonEmptyNavigator.setInputValues_closure34(NonEmptyNavigator.groovy:540)
        at geb.navigator.NonEmptyNavigator.setInputValues(NonEmptyNavigator.groovy:539)
        at geb.navigator.NonEmptyNavigator.value(NonEmptyNavigator.groovy:328)
        at geb.content.NavigableSupport.methodMissing(NavigableSupport.groovy:123)
        at geb.content.PageContentTemplateFactoryDelegate.methodMissing(PageContentTemplateFactoryDelegate.groovy:34)
        at happytrails.pages.AddRoutePage._clinit__closure2_closure4(AddRoutePage.groovy:11)
        at geb.content.PageContentTemplate.invokeFactory(PageContentTemplate.groovy:97)
        at geb.content.PageContentTemplate.create_closure1(PageContentTemplate.groovy:59)
        at geb.content.PageContentTemplate.create(PageContentTemplate.groovy:82)
        at geb.content.PageContentTemplate.get(PageContentTemplate.groovy:54)
        at geb.content.NavigableSupport.getContent(NavigableSupport.groovy:45)
        at geb.content.NavigableSupport.propertyMissing(NavigableSupport.groovy:141)
        at geb.Browser.propertyMissing(Browser.groovy:209)
        at geb.spock.GebSpec.propertyMissing(GebSpec.groovy:59)
        at happytrails.AuthenticatedUserSpec.add new route to region(AuthenticatedUserSpec.groovy:78)
    | Completed 7 spock tests, 1 failed in 15588ms
    | Tests FAILED  - view reports in /Users/mraible/dev/happytrails-grails2/target/test-reports

Solution:

    Changed AddRoutePage from:

        static content = {
            createButton(to: ShowRoutePage) { create() }
            name { value("Name") }
            distance { value("Distance") }
            location { value("Location") }
        }

    To:

        static content = {
            createButton(to: ShowRoutePage) { create() }
            form { $("form") }
        }

    And referenced accordingly in AuthenticatedUserSpec.

Problem:

    CloudBees doesn't support Grails 2.2.1
    
Solution:

    Install Grails Wrapper, Upgrade Grails Jenkins Plugin and reconfigure
    
Problem:

    CloudBees error when using Java 7
    | Error Compilation error: startup failed:
      Invalid commandline usage for javac.
      javac: invalid source release: 1.7
      Usage: javac <options> <source files>
      use -help for a list of possible options

Solution:
    Changed source/target to 1.6
      
Problem:

    CloudBees error when using Java 8
    | Error Compilation error: startup failed:
    Compile error during compilation with javac.
    /scratch/jenkins/workspace/Happy Trails - Grails 2/work/plugins/searchable-0.6.4/src/java/grails/plugin/searchable/internal/compass/index/DefaultUnindexMethod.java:94: error: reference to delete is ambiguous
                        session.delete(query);
                               ^
      both method delete(CompassQuery) in CompassOperations and method delete(CompassQuery) in CompassIndexSession match
    Note: Some input files use or override a deprecated API.
    Note: Recompile with -Xlint:deprecation for details.
    Note: Some input files use unchecked or unsafe operations.
    Note: Recompile with -Xlint:unchecked for details.
    1 error
    
Problem:

    Upgraded app fails to start on Heroku:
    
    2013-03-15T21:10:56+00:00 app[web.1]: java.lang.NoClassDefFoundError: javax/servlet/AsyncContext
    2013-03-15T21:10:56+00:00 app[web.1]: 	at org.codehaus.groovy.util.LazyReference.getLocked(LazyReference.java:46)
    2013-03-15T21:10:56+00:00 app[web.1]: 	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
    2013-03-15T21:10:56+00:00 app[web.1]: 	at java.lang.Class.privateGetDeclaredMethods(Class.java:2444)
    2013-03-15T21:10:56+00:00 app[web.1]: Caused by:
    2013-03-15T21:10:56+00:00 app[web.1]: 	at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:643)
    2013-03-15T21:10:56+00:00 app[web.1]: 	at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:233)
    2013-03-15T21:10:56+00:00 app[web.1]: 	at org.codehaus.groovy.util.LazyReference.get(LazyReference.java:33)
    2013-03-15T21:10:56+00:00 app[web.1]: 	at java.lang.Class.forName(Class.java:264)
    
Solution:

    Changed servlet version to 2.5
    
